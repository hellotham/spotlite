---
import { getCollection } from 'astro:content'
import { Image } from 'astro:assets'

let work = await getCollection('work')
work = work.sort((a, b) => b.data.datespan.localeCompare(a.data.datespan))
---

<div class='p-6 border border-zinc-100 rounded-2xl dark:border-zinc-700/40'>
  <h2 class='text-sm text-zinc-900 font-semibold flex dark:text-zinc-100'>
    <svg
      viewBox='0 0 24 24'
      fill='none'
      stroke-width='1.5'
      stroke-linecap='round'
      stroke-linejoin='round'
      aria-hidden='true'
      class='flex-none h-6 w-6'
      ><path
        d='M2.75 9.75a3 3 0 0 1 3-3h12.5a3 3 0 0 1 3 3v8.5a3 3 0 0 1-3 3H5.75a3 3 0 0 1-3-3v-8.5Z'
        class='fill-zinc-100 stroke-zinc-400 dark:fill-zinc-100/10 dark:stroke-zinc-500'
      ></path><path
        d='M3 14.25h6.249c.484 0 .952-.002 1.316.319l.777.682a.996.996 0 0 0 1.316 0l.777-.682c.364-.32.832-.319 1.316-.319H21M8.75 6.5V4.75a2 2 0 0 1 2-2h2.5a2 2 0 0 1 2 2V6.5'
        class='stroke-zinc-400 dark:stroke-zinc-500'></path></svg
    ><span class='ml-3'>Work</span>
  </h2>
  <ol class='mt-6 space-y-4'>
    {
      work.map((job) => (
        <li class='flex gap-4'>
          <>
            <div class='mt-1 rounded-full flex flex-none h-10 w-10 ring-1 ring-zinc-900/5 shadow-md shadow-zinc-800/5 items-center justify-center relative dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0'>
              <Image
                src={job.data.image}
                alt={job.data.company}
                width={64}
                class='h-8 w-8 object-cover'
              />
            </div>
            <dl class='flex flex-auto flex-wrap gap-x-2'>
              <dd class='text-sm text-zinc-900 font-medium flex-none w-full dark:text-zinc-100'>
                {job.data.company}
              </dd>
              <dt class='sr-only'>Role</dt>
              <dd class='text-xs text-zinc-500 dark:text-zinc-400'>{job.data.role}</dd>
              <dt class='sr-only'>Date</dt>
              <>
                <dt class='sr-only'>Company</dt>
                <dd
                  class='text-xs text-zinc-400 ml-auto dark:text-zinc-500'
                  aria-label={job.data.datespan}
                >
                  {job.data.datespan}
                </dd>
              </>
            </dl>
          </>
        </li>
      ))
    }
  </ol>
  <a
    class='group text-sm text-zinc-900 font-medium mt-6 px-3 py-2 outline-offset-2 rounded-md bg-zinc-50 inline-flex gap-2 w-full transition items-center justify-center active:text-zinc-900/60 dark:text-zinc-300 active:bg-zinc-100 dark:bg-zinc-800/50 hover:bg-zinc-100 active:transition-none dark:active:text-zinc-50/70 dark:hover:text-zinc-50 dark:active:bg-zinc-800/50 dark:hover:bg-zinc-800'
    href='/#'
    >Download CV<svg
      viewBox='0 0 16 16'
      fill='none'
      aria-hidden='true'
      class='h-4 w-4 transition stroke-zinc-400 group-active:stroke-zinc-600 dark:group-active:stroke-zinc-50 dark:group-hover:stroke-zinc-50'
      ><path
        d='M4.75 8.75 8 12.25m0 0 3.25-3.5M8 12.25v-8.5'
        stroke-width='1.5'
        stroke-linecap='round'
        stroke-linejoin='round'></path></svg
    ></a
  >
</div>
